---
title: "はじめての dev3000 入門：AIデバッグのための開発ログを一元化する（改訂版）"
emoji: "🛠️"
type: "idea"
topics: ["dev3000","debug","MCP","Playwright"]
published: false
---

> 本記事は dev3000 の入門記事（下書き）を、Zenn の形式要件に合わせて再作成した改訂版です。

（本文は前稿と同一。必要であれば差分解説を追記可能です）

## これは何？

**dev3000** は、開発中の Web アプリから以下を時系列で自動収集・可視化するデバッグ支援ツールです：
- **サーバーログ / コンソール出力**
- **ブラウザのコンソールメッセージとエラー**
- **ネットワークリクエスト / レスポンス**
- **自動スクリーンショット（ナビゲーション・エラーなどのイベント時）**

すべてが統合されたフィードとして保存・閲覧でき、**AI アシスタントへ状況を丸ごと共有**して原因特定を加速できます。ログビューアは `http://localhost:3684/logs` に用意され、最新セッションのシンボリックリンクは `/tmp/d3k.log` です（既定）。

> 参考: リポジトリと詳細は GitHub を参照（英語）: [nanameru/dev3000](https://github.com/nanameru/dev3000)

---

## クイックスタート（最短 1 分）

```bash
pnpm install -g dev3000
dev3000
```

- 既定では `pnpm dev` を起動し、ポート `3000` のアプリを監視します。
- ログビューア: `http://localhost:3684/logs`

> 例: Vite なら `dev3000 --port 5173`、既存ブラウザを使うなら `dev3000 --servers-only`

---

## AI ツール（MCP）との連携

dev3000 には **MCP サーバー**が同梱され、AI ツールからブラウザ操作やログ検索を行えます。

### 設定例（Claude MCP）

```bash
claude mcp add dev3000 http://localhost:3684/api/mcp/mcp
```

その後、プロンプトで：

```text
Use dev3000 to debug my app
```

### Cursor での接続例

```json
{
  "mcpServers": {
    "dev3000": {
      "type": "http",
      "url": "http://localhost:3684/api/mcp/mcp"
    }
  }
}
```

MCP 経由で使える主な機能：
- `read_consolidated_logs`: 直近ログを要約取得（フィルタ可）
- `search_logs`: 正規表現でログ検索（前後文脈つき）
- `get_browser_errors`: 一定期間のブラウザエラー抽出
- `execute_browser_action`: ブラウザを制御（クリック/入力/スクロール/スクショ等）

> 出典: リポジトリ README（[nanameru/dev3000](https://github.com/nanameru/dev3000)）

---

## 2 つの監視モード

### 1) 既定: Playwright による自動ブラウザ
- セットアップ: 自動
- パフォーマンス: 高めのリソースを使用
- ブラウザ制御: フルオートメーション（操作可能）
- スクショ: 自動撮影
- 用途: 自動テスト / CI に最適

### 2) 代替: Chrome 拡張による軽量監視
- セットアップ: 拡張を手動インストール
- パフォーマンス: 軽量
- ブラウザ制御: モニタリング中心（制御なし）
- スクショ: 手動（拡張側）
- 用途: 日常の開発デバッグに最適

Chrome 拡張のインストール:
1. Chrome で `chrome://extensions/` を開く
2. 右上で「デベロッパーモード」をオン
3. 「パッケージ化されていない拡張機能を読み込む」
4. dev3000 のインストールディレクトリから `chrome-extension` フォルダを選択
5. ローカルホストのタブを自動監視します

Chrome 拡張を使うときは、dev3000 を次のように起動：

```bash
dev3000 --servers-only
```

> 出典: README の比較表と手順（[nanameru/dev3000](https://github.com/nanameru/dev3000)）

---

## よく使うオプション

```bash
dev3000 [options]

  -p, --port <port>         アプリのポート（既定: 3000）
  --mcp-port <port>         MCP サーバーのポート（既定: 3684）
  -s, --script <script>     起動する npm/pnpm スクリプト（既定: dev）
  --servers-only            サーバーのみ起動（ブラウザ起動なし）
  --profile-dir <dir>       Chrome プロファイルの保存先（既定: /tmp/dev3000-chrome-profile）
```

例：

```bash
# Next.js (port 3000) を明示
dev3000 --port 3000

# 既存ブラウザを使い、Playwright を使わない
dev3000 --servers-only

# プロファイルディレクトリを変更
dev3000 --profile-dir ./chrome-profile
```

> 出典: README のオプション記載（[nanameru/dev3000](https://github.com/nanameru/dev3000)）

---

## Next.js プロジェクトでの使い方（例）

1. プロジェクトルートで dev3000 を実行：
   ```bash
   dev3000
   ```
2. 自動で `pnpm dev` が起動し、`http://localhost:3000` を監視
3. 問題を再現し、`http://localhost:3684/logs` を開いて時系列で確認
4. 必要に応じて MCP から「ネットワーク失敗を検索」「特定のボタンをクリック」などを指示

Tips:
- Playwright ウィンドウは自動で別ウィンドウとして開きます。
- 自前のブラウザを使いたいときは `--servers-only` を併用し、Chrome 拡張で監視してください。

---

## 典型的なワークフロー

1. バグの再現（手元のブラウザ or Playwright）
2. ログビューアでサーバー・ブラウザ・ネットワーク・スクショを時系列で確認
3. 気になる箇所を **MCP の検索機能**でピンポイントに特定
4. AI アシスタントへ「この時点のエラーと直前のネットワークを要約して」と依頼
5. 修正 → 再現 → 差分確認をループ

---

## トラブルシュート（よくある）

- 既にポート使用中: `--port` または `--mcp-port` を変更
- Playwright ウィンドウが開かない: `--servers-only` で切り分け、Chrome 拡張で監視
- ログが多くて追えない: MCP の `search_logs` で正規表現検索（前後文脈つき）

---

## よくある質問（FAQ）

- データはどこに保存されますか？
  - `/var/log/dev3000/`（または一時ディレクトリ）。最新セッションは `/tmp/d3k.log` へのシンボリックリンク。
- スクリーンショットは自動ですか？
  - ナビゲーション、エラーなどのイベントで自動撮影されます（Playwright モード）。
- Chrome 拡張と Playwright の使い分けは？
  - 開発中の軽快さを優先：Chrome 拡張。E2E/CI の自動化：Playwright。

> 出典: README の説明（[nanameru/dev3000](https://github.com/nanameru/dev3000)）

---

## まとめ

- dev3000 は**開発時の観測可能性**を劇的に高め、**AI と相性が良い**デバッグ体験を提供します。
- まずは `pnpm i -g dev3000 && dev3000` で体験し、必要に応じて MCP 連携と Chrome 拡張を使い分けましょう。

参考リンク：
- GitHub: [nanameru/dev3000](https://github.com/nanameru/dev3000)
